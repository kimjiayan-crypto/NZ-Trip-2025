<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç´è¥¿è˜­ 15 å¤©è‡ªé§•å°è¦½</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        :root { --primary: #2c3e50; --accent: #3498db; }
        body { margin: 0; font-family: sans-serif; display: flex; flex-direction: column; height: 100vh; }
        header { background: var(--primary); color: white; padding: 15px; text-align: center; font-size: 1.2rem; }
        #container { display: flex; flex: 1; overflow: hidden; }
        #sidebar { width: 400px; overflow-y: auto; background: #f4f7f6; padding: 15px; border-right: 2px solid #ddd; }
        #map { flex: 1; }
        .day-box { background: white; border-radius: 10px; padding: 15px; margin-bottom: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); border-left: 6px solid #ccc; cursor: pointer; }
        .day-box:hover { border-left-color: var(--accent); }
        .active-day { border-left-color: var(--accent); background: #ebf5fb; }
        .day-num { font-weight: bold; color: var(--accent); font-size: 1.1rem; }
        .route-info { color: #e67e22; font-size: 0.85rem; font-weight: bold; margin: 5px 0; }
        .details { font-size: 0.9rem; line-height: 1.5; color: #444; }
        .marker-btn { display: inline-block; margin-top: 8px; padding: 4px 10px; background: #3498db; color: white; border-radius: 4px; text-decoration: none; font-size: 0.8rem; }
        @media (max-width: 768px) { #container { flex-direction: column-reverse; } #sidebar { width: 100%; height: 45%; } }
    </style>
</head>
<body>

<header>ğŸ‡³ğŸ‡¿ ç´è¥¿è˜­å—å³¶ 15 å¤©äº’å‹•è¡Œç¨‹è¡¨</header>

<div id="container">
    <div id="sidebar" id="itinerary">
        </div>
    <div id="map"></div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    // --- 1. è³‡æ–™å®šç¾© ---
    const itinerary = [
        { day: 2, title: "åŸºç£åŸæŠµé”", route: "æ©Ÿå ´ â†’ å¸‚å€", dist: "12km / 20min", details: "13:00 å–è»Š -> 16:30 é›…èŠ³æ²³æ’èˆ¹ -> Riverside Market æ™šé¤", pos: [-43.532, 172.636] },
        { day: 3, title: "åŸºç£åŸ â†’ Tekapo", route: "SH79 æ™¯è§€å…¬è·¯", dist: "225km / 3hr", details: "Fairlie Bakehouse è²·æ´¾ -> å–„ç‰§æ•™å ‚ -> æ¹–é‚Šæ˜Ÿç©º", pos: [-44.004, 170.477] },
        { day: 4, title: "Tekapo â†’ åº«å…‹å±±", route: "SH80 å†°æ²³å…¬è·¯", dist: "105km / 1.5hr", details: "Hooker Valley Track (3.5hr å¥è¡Œ) -> ä½éš±å£«é£¯åº—", pos: [-43.734, 170.096] },
        { day: 5, title: "åº«å…‹å±± â†’ Oamaru", route: "å…§é™¸ç¶“ SH8 è‡³æ±å²¸", dist: "215km / 2.5hr", details: "Moeraki å¤§åœ“çŸ³ -> 19:00 è—ä¼éµæ­¸å·¢", pos: [-45.097, 170.970] },
        { day: 6, title: "Oamaru â†’ Wanaka", route: "Lindis Pass éš˜å£", dist: "280km / 3.5hr", details: "High Country Salmon åƒé®­é­š -> é‚£æ£µæ¨¹ å¤•é™½", pos: [-44.694, 169.132] },
        { day: 7, title: "Wanaka æ»‘é›ªæ—¥", route: "Cardrona å¾€è¿”", dist: "70km / 1.5hr", details: "Cardrona æ»‘é›ªå ´ / è–°è¡£è‰è¾²å ´", pos: [-44.863, 169.004] },
        { day: 9, title: "Wanaka â†’ çš‡åé®", route: "Crown Range æœ€é«˜å…¬è·¯", dist: "70km / 1.5hr", details: "ç®­é®(Arrowtown) -> Skyline çºœè»Šå¤œæ™¯", pos: [-45.031, 168.662] },
        { day: 11, title: "Glenorchy é­”æˆ’æ—¥", route: "æ¹–ç•”çµ•ç¾å…¬è·¯", dist: "90km / 1.5hr", details: "Glenorchy ç´…è‰²ç¢¼é ­ -> é­”æˆ’å–æ™¯å¤§æ™¯", pos: [-44.850, 168.385] },
        { day: 12, title: "çš‡åé® â†’ è’‚é˜¿ç‘™", route: "SH6 å‰å¾€å³½ç£é–€æˆ¶", dist: "175km / 2hr", details: "19:00 è¢ç«èŸ²æ´å°è¦½", pos: [-45.414, 167.717] },
        { day: 13, title: "ç±³ä½›å³½ç£ä¸€æ—¥", route: "ç±³ä½›å…¬è·¯ (å–®ç¨‹)", dist: "120km / 2.5hr", details: "ç±³ä½›å³½ç£éŠèˆ¹ -> é¡æ¹– -> å› Te Anau", pos: [-44.671, 167.926] }
    ];

    // --- 2. åˆå§‹åŒ–åœ°åœ– ---
    const map = L.map('map').setView([-44.2, 170.5], 7);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

    const sidebar = document.getElementById('sidebar');
    const points = itinerary.map(d => d.pos);
    
    // ç¹ªè£½ç¸½è·¯ç·š (è—è‰²è™›ç·š)
    const polyline = L.polyline(points, {color: '#3498db', weight: 3, dashArray: '10, 10'}).addTo(map);

    // --- 3. ç”Ÿæˆå·¦å´é¸å–®èˆ‡åœ°åœ–æ¨™è¨˜ ---
    itinerary.forEach((item, index) => {
        // å»ºç«‹æ¨™è¨˜
        const marker = L.marker(item.pos).addTo(map).bindPopup(`<b>Day ${item.day}: ${item.title}</b>`);

        // å»ºç«‹å·¦å´å¡ç‰‡
        const card = document.createElement('div');
        card.className = 'day-box';
        card.innerHTML = `
            <div class="day-num">DAY ${item.day} - ${item.title}</div>
            <div class="route-info">ğŸš— è·¯ç·šï¼š${item.route} (${item.dist})</div>
            <div class="details">${item.details}</div>
            <a href="https://www.google.com/maps/search/?api=1&query=${item.pos[0]},${item.pos[1]}" target="_blank" class="marker-btn">Google Map å°èˆª</a>
        `;
        
        card.onclick = () => {
            // é»æ“Šå¾Œåœ°åœ–é£›éå»
            map.flyTo(item.pos, 11);
            marker.openPopup();
            
            // åˆ‡æ› active æ¨£å¼
            document.querySelectorAll('.day-box').forEach(b => b.classList.remove('active-day'));
            card.classList.add('active-day');
        };
        
        sidebar.appendChild(card);
    });
</script>
</body>
</html>
